(function(e){e.fn.stacks=function(t){var n=e.extend({body:".stickyparent",title:".header",margin:0,offset:0},t);e.each(this.find(n.body+" "+n.title),function(t,r){var i=e(r).offset();e(window).resize(function(){$paddleft=e(r).css("padding-left").substring(0,e(r).css("padding-left").indexOf("p"));$paddright=e(r).css("padding-right").substring(0,e(r).css("padding-left").indexOf("p"));$width=e(r).parent().width()-$paddleft-$paddright;if(!e(r).hasClass("fixed")){i=e(r).offset()}$left=i.left;e(r).css({left:$left,width:$width})});e(window).scroll(function(){if(e(window).scrollTop()+e(r).outerHeight(true)>=e(r).closest(n.body).offset().top+e(r).closest(n.body).outerHeight(true)+n.margin-n.offset){e(r).removeClass("fixed").addClass("absolute").removeAttr("style")}else if(e(document).scrollTop()>=i.top-n.offset){$offset=i.left;$awidth=e(r).width();e(r).removeClass("absolute").addClass("fixed").css({left:$offset,width:$awidth});if(e(r).siblings("#filler").length<1){e('<div id="filler" />').css("height",e(r).outerHeight(true)).insertAfter(e(r))}}else{e(r).removeClass("fixed");e(r).removeAttr("style");e(r).siblings("#filler").remove()}})})}})(jQuery)